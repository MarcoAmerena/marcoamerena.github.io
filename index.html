<!DOCTYPE html>
<html>
  
  <head data-gwd-animation-mode="quickMode">
    <title>Websocket</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="generator" content="Google Web Designer 1.1.2.0814">
    
    <script language="javascript" type="text/javascript">
    var wsUri = "ws://sockets.mbed.org/ws/MarcoAmerena/rw";
    websocket = new WebSocket(wsUri);
    
    OutputConsole = document.getElementById("gwd-span-lm8h");
    
    function InitWebSocket()
    {
    websocket = new WebSocket(wsUri);
    websocket.onopen = function(evt) { onOpen(evt) };
    websocket.onclose = function(evt) { onClose(evt) };
    websocket.onmessage = function(evt) { onMessage(evt) };
    websocket.onerror = function(evt) { onError(evt) };
    }
    
    function onOpen(evt)
    {
    writeToScreen("Connected to " + wsUri);
    }
    
    function onClose(evt)
    {
    writeToScreen("Disconnected from " + wsUri);
    }
    
    function onMessage(evt)
    {
    res = evt.data.match(/\S+/g)
    //var Cmd = res[0].trim();
    var TemperatureString;
    TemperatureString = res;
    writeToScreen("Received: " + TemperatureString);
    }
    
    function onError(evt)
    {
    writeToScreen('<span style="color: red;">ERROR:</span> ' + evt.data);
    websocket.close();
    }
    
    function doSend(message)
    {
    writeToScreen("SENT: " + message);
    websocket.send(message);
    }
    
    function writeToScreen(message)
    {
    var TmpPtr = RxTerminalPtr;
    var MessageBuf = "";
    RxTerminal[RxTerminalPtr] = message;
    for(i=0;i<RxTerminalSize;i++)
    {
    MessageBuf = MessageBuf + "<br>" + RxTerminal[TmpPtr];
    }
    RxTerminalPtr++;
    if(RxTerminalPtr == RxTerminalSize)
    RxTerminalPtr = 0;
    OutputConsole.innerHTML = MessageBuf;
    }
    
    window.addEventListener("load", init, false);
    function mDown(obj) 
    {
    obj.style.backgroundColor = "#220000";
    doSend("Github");
    }
</script>
    
    <style type="text/css">
      html, body {
        width: 100%;
        height: 100%;
        margin: 0px;
      }
      body {
        background-color: transparent;
        -webkit-transform: perspective(1400px) matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
        -webkit-transform-style: preserve-3d;
      }
      .gwd-div-tew3 {
        position: absolute;
        font-family:'Times New Roman';
        text-align: left;
        color: rgb(0, 0, 0);
        width: 800px;
        height: 150px;
        left: 318px;
        top: 175px;
        border-width: 2px;
        border-style: solid;
      }
      .gwd-div-erlg {
        position: absolute;
        font-family:'Times New Roman';
        text-align: left;
        color: rgb(0, 0, 0);
        width: 800px;
        height: 150px;
        left: 322px;
        top: 363px;
        border-width: 2px;
        border-style: solid;
      }
      .gwd-h1-3rin {
        position: absolute;
        width: 410px;
        height: 92px;
        font-family:'Times New Roman';
        font-size: 16px;
        font-weight: normal;
        text-align: left;
        color: rgb(0, 0, 0);
        left: 595px;
        top: 17px;
      }
      .gwd-strong-30bb {
        font-size: 45px;
        font-family: Arial;
        color: rgb(15, 55, 228);
      }
      .gwd-p-a2zp {
        position: absolute;
        width: 186px;
        height: 72px;
        font-family:'Times New Roman';
        text-align: left;
        color: rgb(0, 0, 0);
        left: 113px;
        top: 159.5px;
      }
      .gwd-span-lm8h {
        font-size: 40px;
        font-family: Arial;
        font-weight: bold;
      }
      .gwd-p-fom7 {
        position: absolute;
        height: 86px;
        font-family:'Times New Roman';
        text-align: left;
        color: rgb(0, 0, 0);
        width: 100px;
        left: 206px;
        top: 348.50000000000006px;
      }
      .gwd-span-3iou {
        font-size: 40px;
        font-family: Arial;
        font-weight: bold;
      }
      .gwd-button-job5 {
        width: 150px;
        height: 40px;
        -webkit-transform: translate3d(978px, 531.5px, 0px);
        -webkit-transform-style: preserve-3d;
      }
    </style>
  </head>
  
  <body>
    <div class="gwd-div-tew3"></div>
    <div class="gwd-div-erlg"></div>
    <button class="gwd-button-job5" onmousedown="mDown(this)">SEND</button>
    <p class="gwd-h1-3rin"><strong class="gwd-strong-30bb">WEBSOCKET</strong>

    </p>
    <p class="gwd-p-a2zp"><span class="gwd-span-lm8h">Recieved:</span>

    </p>
    <p class="gwd-p-fom7"><span class="gwd-span-3iou">Sent:</span>

    </p>
  </body>

</html> 

<!--------------------------------------------------------------------------------------------------------------------------->

<!--
<!DOCTYPE html>
<meta charset="utf-8" />
<head>
<title>Monkey Do!</title>
</head>
<script type="text/javascript" src="canvasjs.min.js"></script>
<script language="javascript" type="text/javascript">
var wsUri = "ws://sockets.mbed.org/ws/MarcoAmerena/rw";
var OutputConsole;
websocket = new WebSocket(wsUri);
var RxTerminal = [".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","."];
var RxTerminalSize = 16;
var RxTerminalPtr = 0;
var ChartHistory = 64;
var dps = []; // dataPoints
var DataPointNum = 0;
var chart;
window.onload = function ()
{
var i;
for(i=0;i<ChartHistory;i++)
{
dps[i] = ({
x: DataPointNum++,
y: 25
})
}
chart = new CanvasJS.Chart("chartContainer",{
title :{
text: "Temperature Data"
},	
axisY:{
title: "Temperature (Degrees C)",
titleFontSize :"16",
},	
markerType: "circle",
axisX:{
title: "DataPoint",
titleFontSize : "16"
},	
data: [{
type: "spline",
dataPoints: dps
}]
});
}
function init()
{
var i;
OutputConsole = document.getElementById("Output");
InitWebSocket();
}
function SendTestData()
{
}
function InitWebSocket()
{
websocket = new WebSocket(wsUri);
websocket.onopen = function(evt) { onOpen(evt) };
websocket.onclose = function(evt) { onClose(evt) };
websocket.onmessage = function(evt) { onMessage(evt) };
websocket.onerror = function(evt) { onError(evt) };
}
function onOpen(evt)
{
writeToScreen("Connected to " + wsUri);
}
function onClose(evt)
{
writeToScreen("Disconnected from " + wsUri);
}
//function onMessage(evt)
//{
//var res = evt.data.split(":",2);
//http://blog.tompawlak.org/split-string-into-tokens-javascript
//////////////////////////////////////////////////////
//res = evt.data.match(/\S+/g)
//var Cmd = res[0].trim();
//var TemperatureString;
//switch(Cmd)
//{
//case "temp":
//TemperatureString = parseFloat(res[1]).toFixed(1);
//writeToScreen("Received Temperature: " + TemperatureString);
//dps.push({
//x: DataPointNum,
//y: parseFloat(res[1])
//})
//dps.shift();	
//DataPointNum++;
//chart.render();
//break;
//default:
//break;
//}
//} 
function onMessage(evt)
{
//var res = evt.data.split(":",2);
//http://blog.tompawlak.org/split-string-into-tokens-javascript
//////////////////////////////////////////////////////
res = evt.data.match(/\S+/g)
//var Cmd = res[0].trim();
var TemperatureString;
//switch(Cmd)
//{
//case "temp":
TemperatureString = res;
writeToScreen("Received: " + TemperatureString);
//dps.push({
//x: DataPointNum,
//y: parseFloat(res[1])
//})
//dps.shift();	
//DataPointNum++;
//chart.render();
//break;
//default:
//break;
//}
}
function onError(evt)
{
writeToScreen('<span style="color: red;">ERROR:</span> ' + evt.data);
websocket.close();
}
function doSend(message)
{
writeToScreen("SENT: " + message);
websocket.send(message);
}
function writeToScreen(message)
{
var i;
var TmpPtr = RxTerminalPtr;
var MessageBuf = "";
RxTerminal[RxTerminalPtr] = message;
for(i=0;i<RxTerminalSize;i++)
{
MessageBuf = MessageBuf + "<br>" + RxTerminal[TmpPtr];
if(TmpPtr == 0)
{
TmpPtr = RxTerminalSize - 1;
}
else
{
TmpPtr--;
}
}
RxTerminalPtr++;
if(RxTerminalPtr == RxTerminalSize)
RxTerminalPtr = 0;
OutputConsole.innerHTML = MessageBuf;
}
window.addEventListener("load", init, false);
function mDown(obj) {
obj.style.backgroundColor = "#220000";
//doSend("ssr 0 1");
}
function mUp(obj) {
obj.style.backgroundColor="#D94A38";
doSend("Big Red Button!");
}
</script>
<div id = "wrapper">
<center>
<div style="border:3px gray;">
<center>
<h1>MonkeyDo - Data Receiver</h1>
<hr>
<img src="MonkeyDo.png" width="200" alt="MonkeyDo"></img>
<div id = "Output" class = "console" style="width:600px;height:360px;border:1px dashed gray;"></div>
<div id="chartContainer" style="height: 300px; width:600px;">	</div>
<h2>A Big Red Button</h2>
<div class="bigredbutton" onmousedown="mDown(this)" onmouseup="mUp(this)" style="background-color:#D94A38; width:100px;height:100px; vertical-align:center;"></div>
</center>
</div>
</center>
</div>
-->

  

