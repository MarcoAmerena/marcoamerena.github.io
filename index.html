<!DOCTYPE html>
<html>
  
  <head data-gwd-animation-mode="quickMode">
    <title>Websockets</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="generator" content="Google Web Designer 1.1.2.0814">
    <style type="text/css">
      html, body {
        width: 100%;
        height: 100%;
        margin: 0px;
      }
      body {
        background-color: transparent;
        -webkit-transform: perspective(1400px) matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
        -webkit-transform-style: preserve-3d;
      }
      .gwd-header-bkvy {
        font-family:'Times New Roman';
        height: 60px;
        left: 565px;
        position: absolute;
        text-align: left;
        top: 35px;
        width: 350px;
      }
      .gwd-span-qzx6 {
        border-color: rgb(61, 59, 189);
        color: rgb(61, 59, 189);
        font-family: Arial;
        font-size: 45px;
        font-weight: bold;
        outline-color: rgb(61, 59, 189);
        text-decoration: none;
        -webkit-column-rule-color: rgb(61, 59, 189);
        -webkit-text-emphasis-color: rgb(61, 59, 189);
        -webkit-text-fill-color: rgb(61, 59, 189);
        -webkit-text-stroke-color: rgb(61, 59, 189);
        width: auto;
      }
      .gwd-p-00r4 {
        font-family:'Times New Roman';
        height: 50px;
        left: 242px;
        position: absolute;
        text-align: left;
        top: 355px;
        width: 100px;
        z-index: 0;
        -webkit-transform: matrix(1, 0, 0, 1, 0, 30);
        -webkit-transform-style: preserve-3d;
      }
      .gwd-span-2l8q {
        font-family: Arial;
        font-size: 40px;
        font-weight: bold;
        width: auto;
      }
      .gwd-p-n7yx {
        height: 50px;
        left: 540px;
        top: 301.5px;
        width: 200px;
        z-index: 0;
        -webkit-transform: matrix(1, 0, 0, 1, 156, 191.5);
        -webkit-transform-style: preserve-3d;
      }
      .gwd-span-hn6e {
        width: auto;
      }
      .gwd-button-ekjw {
        height: 50px;
        margin: 0px;
        width: 250px;
        z-index: 0;
        -webkit-transform: matrix(1, 0, 0, 1, 959, 461.5);
        -webkit-transform-style: preserve-3d;
      }
      .gwd-div-vgt3 {
        border-style: solid;
        border-width: 2px;
        font-family:'Times New Roman';
        height: 120px;
        left: 354px;
        position: absolute;
        text-align: left;
        top: 202.5px;
        width: 850px;
      }
      .gwd-div-6g17 {
        border-style: solid;
        border-width: 2px;
        font-family:'Times New Roman';
        height: 120px;
        left: 354px;
        position: absolute;
        text-align: left;
        top: 367.5px;
        width: 850px;
        z-index: 0;
        -webkit-transform: matrix(1, 0, 0, 1, 0, 30);
        -webkit-transform-style: preserve-3d;
      }
    </style>
  </head>
  
  <body>
    <header class="gwd-header-bkvy"><span class="gwd-span-qzx6">WEBSOCKETS</span>

    </header>
    <p class="gwd-p-00r4"><span class="gwd-span-2l8q">Sent:</span>

    </p>
    <p class="gwd-p-n7yx"><span class="gwd-span-2l8q gwd-span-hn6e">Recieved:</span>

    </p>
    <button class="gwd-button-ekjw">SEND</button>
    <div class="gwd-div-vgt3"></div>
    <div class="gwd-div-6g17"></div>
  </body>

</html>

<!--------------------------------------------------------------------------------------------------------------------------->

<!-- Skip to content
This repository

    Explore
    Gist
    Blog
    Help

    Marcus MarcoAmerena

    1
    0
    0

ehughes/MonkeyDo

MonkeyDo / SRC / MonkeyDo-SensorRx.html
ehughes ehughes on 4 Jul
1st add! Working files for demo videos

1 contributor
218 lines (153 sloc) 3.912 kb
<!DOCTYPE html>
<meta charset="utf-8" />
<head>
<title>Monkey Do!</title>
</head>
<script type="text/javascript" src="canvasjs.min.js"></script>
<script language="javascript" type="text/javascript">
var wsUri = "ws://sockets.mbed.org/ws/MarcoAmerena/rw";
var OutputConsole;
websocket = new WebSocket(wsUri);
var RxTerminal = [".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","."];
var RxTerminalSize = 16;
var RxTerminalPtr = 0;
var ChartHistory = 64;
var dps = []; // dataPoints
var DataPointNum = 0;
var chart;
window.onload = function ()
{
var i;
for(i=0;i<ChartHistory;i++)
{
dps[i] = ({
x: DataPointNum++,
y: 25
})
}
chart = new CanvasJS.Chart("chartContainer",{
title :{
text: "Temperature Data"
},	
axisY:{
title: "Temperature (Degrees C)",
titleFontSize :"16",
},	
markerType: "circle",
axisX:{
title: "DataPoint",
titleFontSize : "16"
},	
data: [{
type: "spline",
dataPoints: dps
}]
});
}
function init()
{
var i;
OutputConsole = document.getElementById("Output");
InitWebSocket();
}
function SendTestData()
{
}
function InitWebSocket()
{
websocket = new WebSocket(wsUri);
websocket.onopen = function(evt) { onOpen(evt) };
websocket.onclose = function(evt) { onClose(evt) };
websocket.onmessage = function(evt) { onMessage(evt) };
websocket.onerror = function(evt) { onError(evt) };
}
function onOpen(evt)
{
writeToScreen("Connected to " + wsUri);
}
function onClose(evt)
{
writeToScreen("Disconnected from " + wsUri);
}
function onMessage(evt)
{
//var res = evt.data.split(":",2);
//http://blog.tompawlak.org/split-string-into-tokens-javascript
res = evt.data.match(/\S+/g)
var Cmd = res[0].trim();
var TemperatureString;
switch(Cmd)
{
case "temp":
TemperatureString = parseFloat(res[1]).toFixed(1);
writeToScreen("Received Temperature: " + TemperatureString);
dps.push({
x: DataPointNum,
y: parseFloat(res[1])
})
dps.shift();	
DataPointNum++;
chart.render();
break;
default:
break;
}
}
function onError(evt)
{
writeToScreen('<span style="color: red;">ERROR:</span> ' + evt.data);
websocket.close();
}
function doSend(message)
{
writeToScreen("SENT: " + message);
websocket.send(message);
}
function writeToScreen(message)
{
var i;
var TmpPtr = RxTerminalPtr;
var MessageBuf = "";
RxTerminal[RxTerminalPtr] = message;
for(i=0;i<RxTerminalSize;i++)
{
MessageBuf = MessageBuf + "<br>" + RxTerminal[TmpPtr];
if(TmpPtr == 0)
{
TmpPtr = RxTerminalSize - 1;
}
else
{
TmpPtr--;
}
}
RxTerminalPtr++;
if(RxTerminalPtr == RxTerminalSize)
RxTerminalPtr = 0;
OutputConsole.innerHTML = MessageBuf;
}
window.addEventListener("load", init, false);
function mDown(obj) {
obj.style.backgroundColor = "#220000";
doSend("ssr 0 1");
}
function mUp(obj) {
obj.style.backgroundColor="#D94A38";
doSend("ssr 0 0");
}
</script>
<div id = "wrapper">
<center>
<div style="border:3px gray;">
<center>
<h1>MonkeyDo - Data Receiver</h1>
<hr>
<img src="MonkeyDo.png" width="200" alt="MonkeyDo"></img>
<div id = "Output" class = "console" style="width:600px;height:360px;border:1px dashed gray;"></div>
<div id="chartContainer" style="height: 300px; width:600px;">	</div>
<h2>A Big Red Button</h2>
<div class="bigredbutton" onmousedown="mDown(this)" onmouseup="mUp(this)" style="background-color:#D94A38; width:100px;height:100px; vertical-align:center;"></div>
</center>
</div>
</center>
</div>

    Status
    API
    Training
    Shop
    Blog
    About

    Â© 2014 GitHub, Inc.
    Terms
    Privacy
    Security
    Contact -->

